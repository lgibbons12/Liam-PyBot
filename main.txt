import discord
import os
import requests
import json
from discord.ext import commands


from dotenv import load_dotenv
load_dotenv()
TOKEN = os.getenv("TOKEN")



intents = discord.Intents.default()
intents.message_content = True
client = discord.Client(intents=intents)
bot = commands.Bot(command_prefix="$")


def get_quote():
  response = requests.get("https://zenquotes.io/api/random")
  json_data = json.loads(response.text)
  quote = json_data[0]['q'] + " -" + json_data[0]['a']
  return(quote)

#words
bad_words = ["sucks", "annoying", "bad", "sad"]
coding_words = ["coding", "programming", "hacking", "code", "program", "python"]
bad_word = 0

@client.event
async def on_ready():
    print('We have logged in as {0.user}'.format(client))

@client.event
async def on_message(message):
    if message.author == client.user:
        return

    msg = message.content


    if msg.startswith("update list"):
        await message.channel.send("list updated")


    if msg.startswith("$new"):
        bad_word = msg.split("$new ",1)[1]
        bad_words.append(bad_word)
        await message.channel.send("New encouraging message added.")


    if msg.startswith('bot'):
        await message.channel.send('what?')
    

    if msg.startswith('$inspire'):
        quote = get_quote()
        await message.channel.send(quote)


    if any(word in msg for word in bad_words):
        print("bad words")
        if any(word in msg for word in coding_words):
            print("coding words")
            await message.channel.send("Stop being an anti-coding supporter")
    
    
    

client.run(TOKEN)

